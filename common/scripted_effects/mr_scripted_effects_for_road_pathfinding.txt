#flags used
#expansion_node - for provinces connected to capital
#pathfinding_RX - Pathfinding placeholder for Ring X
#pathfinding_P - Province is good for using as a path
#pathfinding_O - Province is Origin for non capital pathfind

#pathfinder for capital province
pathfinder_effect = {
	#determines starting province
	capital_scope = {
		#starts ring expansion preliminary
		every_neighbor_province = {
			limit = { owned_by = ROOT }
			set_province_flag = pathfinding_R1	
		} #every neighbor of expan. node or capital
	}
	if = {
		limit = {
			any_owned_province = {
				province_has_center_of_trade_of_level = 1
				has_province_flag = pathfinding_R1
				NOT = { has_province_flag =  connected_to_capital }
			}
		}
		random_owned_province = {
			limit = {
				province_has_center_of_trade_of_level = 1
				has_province_flag = pathfinding_R1
				NOT = { has_province_flag =  connected_to_capital }
			}
			save_event_target_as = endpoint
		}
		R1_reverse_pathfind_effect = yes
	}
	else = {
		every_owned_province = {  #every neighbor of R1 that isnt already flagged
			limit = { has_province_flag = pathfinding_R1 }
			every_neighbor_province = {
				limit = {
					NOT = { has_province_flag = pathfinding_R1 }
					NOT = { has_province_flag = expansion_node }
					is_capital = no
					owned_by = ROOT
				}
				set_province_flag = pathfinding_R2
			}
		}
		if = {
			limit = { #if there is a valid CoT to connect to, it will draw a line there
				any_owned_province = {
					province_has_center_of_trade_of_level = 1
					has_province_flag = pathfinding_R2
					NOT = { has_province_flag =  connected_to_capital }
				}
			}
			random_owned_province = { #designates the province it is connecting to as done
				limit = {
					province_has_center_of_trade_of_level = 1
					has_province_flag = pathfinding_R2
					NOT = { has_province_flag =  connected_to_capital }
				}
				save_event_target_as = endpoint
			}
			R2_reverse_pathfind_effect = yes
		}
		else = {
			every_owned_province = {  #every neighbor of R2 that isnt already flagged
				limit = { has_province_flag = pathfinding_R2 }
				every_neighbor_province = {
					limit = {
						NOT = { has_province_flag = pathfinding_R2 }
						NOT = { has_province_flag = pathfinding_R1 }
						NOT = { has_province_flag = expansion_node }
						is_capital = no
						owned_by = ROOT
					}
					set_province_flag = pathfinding_R3
				}
			}
			if = {
				limit = {
					any_owned_province = {
						province_has_center_of_trade_of_level = 1
						has_province_flag = pathfinding_R3
						NOT = { has_province_flag =  connected_to_capital }
					}
				}
				random_owned_province = {
					limit = {
						province_has_center_of_trade_of_level = 1
						has_province_flag = pathfinding_R3
						NOT = { has_province_flag =  connected_to_capital }
					}
					save_event_target_as = endpoint
				}
				R3_reverse_pathfind_effect = yes
			}
			else = {
				every_owned_province = {  #every neighbor of R3 that isnt already flagged
					limit = { has_province_flag = pathfinding_R3 }
					every_neighbor_province = {
						limit = {
							NOT = { has_province_flag = pathfinding_R3 }
							NOT = { has_province_flag = pathfinding_R2 }
							NOT = { has_province_flag = pathfinding_R1 }
							NOT = { has_province_flag = expansion_node }
							is_capital = no
							owned_by = ROOT
						}
						set_province_flag = pathfinding_R4
					}
				}
				if = {
					limit = {
						any_owned_province = {
							province_has_center_of_trade_of_level = 1
							has_province_flag = pathfinding_R4
							NOT = { has_province_flag =  connected_to_capital }
						}
					}
					random_owned_province = {
						limit = {
							province_has_center_of_trade_of_level = 1
							has_province_flag = pathfinding_R4
							NOT = { has_province_flag =  connected_to_capital }
						}
						save_event_target_as = endpoint
					}
					R4_reverse_pathfind_effect = yes
				}
				else = {
					every_owned_province = {  #every neighbor of R4 that isnt already flagged
						limit = { has_province_flag = pathfinding_R4 }
						every_neighbor_province = {
							limit = {
								NOT = { has_province_flag = pathfinding_R4 }
								NOT = { has_province_flag = pathfinding_R3 }
								NOT = { has_province_flag = pathfinding_R2 }
								NOT = { has_province_flag = pathfinding_R1 }
								NOT = { has_province_flag = expansion_node }
								is_capital = no
								owned_by = ROOT
							}
							set_province_flag = pathfinding_R5
						}
					}
					if = {
						limit = {
							any_owned_province = {
								province_has_center_of_trade_of_level = 1
								has_province_flag = pathfinding_R5
								NOT = { has_province_flag =  connected_to_capital }
							}
						}
						random_owned_province = {
							limit = {
								province_has_center_of_trade_of_level = 1
								has_province_flag = pathfinding_R5
								NOT = { has_province_flag =  connected_to_capital }
							}
							save_event_target_as = endpoint
						}
						R5_reverse_pathfind_effect = yes
					}
					else = {
						every_owned_province = {  #every neighbor of R5 that isnt already flagged
							limit = { has_province_flag = pathfinding_R5 }
							every_neighbor_province = {
								limit = {
									NOT = { has_province_flag = pathfinding_R5 }
									NOT = { has_province_flag = pathfinding_R4 }
									NOT = { has_province_flag = pathfinding_R3 }
									NOT = { has_province_flag = pathfinding_R2 }
									NOT = { has_province_flag = pathfinding_R1 }
									NOT = { has_province_flag = expansion_node }
									is_capital = no
									owned_by = ROOT
								}
								set_province_flag = pathfinding_R6
							}
						}
						if = {
							limit = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 1
									has_province_flag = pathfinding_R6
									NOT = { has_province_flag =  connected_to_capital }
								}
							}
							random_owned_province = {
								limit = {
									province_has_center_of_trade_of_level = 1
									has_province_flag = pathfinding_R6
									NOT = { has_province_flag =  connected_to_capital }
								}
								save_event_target_as = endpoint
							}
							R6_reverse_pathfind_effect = yes
						}
						else = {
							every_owned_province = {  #every neighbor of R6 that isnt already flagged
								limit = { has_province_flag = pathfinding_R6 }
								every_neighbor_province = {
									limit = {
										NOT = { has_province_flag = pathfinding_R6 }
										NOT = { has_province_flag = pathfinding_R5 }
										NOT = { has_province_flag = pathfinding_R4 }
										NOT = { has_province_flag = pathfinding_R3 }
										NOT = { has_province_flag = pathfinding_R2 }
										NOT = { has_province_flag = pathfinding_R1 }
										NOT = { has_province_flag = expansion_node }
										is_capital = no
										owned_by = ROOT
									}
									set_province_flag = pathfinding_R7
								}
							}
							if = {
								limit = {
									any_owned_province = {
										province_has_center_of_trade_of_level = 1
										has_province_flag = pathfinding_R7
										NOT = { has_province_flag =  connected_to_capital }
									}
								}
								random_owned_province = {
									limit = {
										province_has_center_of_trade_of_level = 1
										has_province_flag = pathfinding_R7
										NOT = { has_province_flag =  connected_to_capital }
									}
									save_event_target_as = endpoint
								}
								R7_reverse_pathfind_effect = yes
							}
							else = {
								#nothing
							}
						}
					}
				}
			}
		}
	}
	#7 rings should be enough for any distance between any two CoT's/Capitals
}

clear_remaining_flags_effect = {
	every_owned_province = {
		clr_province_flag = pathfinding_R1
		clr_province_flag = pathfinding_R2
		clr_province_flag = pathfinding_R3
		clr_province_flag = pathfinding_R4
		clr_province_flag = pathfinding_R5
		clr_province_flag = pathfinding_R6
		clr_province_flag = pathfinding_R7
	}
}

#does not require while loop because it just finds adj. prov.
R1_reverse_pathfind_effect = {
	event_target:endpoint = {
		set_province_flag = pathfinding_P
	}
	random_owned_province = {
		limit = {
			is_capital = yes
			any_neighbor_province = {
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	clear_remaining_flags_effect = yes
}
R2_reverse_pathfind_effect = {
	event_target:endpoint = {
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #Eliminates R2
		limit = {
			has_province_flag = pathfinding_R2
			NOT = { has_province_flag = pathfinding_P }
		}
		clr_province_flag = pathfinding_R2
	}
	every_owned_province = { #eliminates R1
		limit = {
			has_province_flag = pathfinding_R1
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R2
				}
			}
		}
		clr_province_flag = pathfinding_R1
	}
	random_owned_province = { #selects R1 path
		limit = {
			has_province_flag = pathfinding_R1
			any_neighbor_province = {
				has_province_flag = pathfinding_R2
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	clear_remaining_flags_effect = yes
}

#repeatable cases
R3_reverse_pathfind_effect = {
	event_target:endpoint = {
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #Eliminates extraneous R3
		limit = {
			has_province_flag = pathfinding_R3
			NOT = { has_province_flag = pathfinding_P }
		}
		clr_province_flag = pathfinding_R3
	}
	every_owned_province = { #eliminates R2 not adj to P
		limit = {
			has_province_flag = pathfinding_R2
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R3
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R2
	}
	random_owned_province = { #selects R2 path
		limit = {
			has_province_flag = pathfinding_R2
			any_neighbor_province = {
				has_province_flag = pathfinding_R3
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R1
		limit = {
			has_province_flag = pathfinding_R1
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R2
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R1
	}
	random_owned_province = { #selects R1 path
		limit = {
			has_province_flag = pathfinding_R1
			any_neighbor_province = {
				has_province_flag = pathfinding_R2
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	clear_remaining_flags_effect = yes
}
R4_reverse_pathfind_effect = {
	event_target:endpoint = {
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #Eliminates R4
		limit = {
			has_province_flag = pathfinding_R4
			NOT = { has_province_flag = pathfinding_P }
		}
		clr_province_flag = pathfinding_R4
	}
	every_owned_province = { #eliminates R2 not adj to P
		limit = {
			has_province_flag = pathfinding_R3
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R4
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R3
	}
	random_owned_province = { #selects R3 path
		limit = {
			has_province_flag = pathfinding_R3
			any_neighbor_province = {
				has_province_flag = pathfinding_R4
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R2 not adj to P
		limit = {
			has_province_flag = pathfinding_R2
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R3
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R2
	}
	random_owned_province = { #selects R2 path
		limit = {
			has_province_flag = pathfinding_R2
			any_neighbor_province = {
				has_province_flag = pathfinding_R3
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R1
		limit = {
			has_province_flag = pathfinding_R1
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R2
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R1
	}
	random_owned_province = { #selects R1 path
		limit = {
			has_province_flag = pathfinding_R1
			any_neighbor_province = {
				has_province_flag = pathfinding_R2
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	clear_remaining_flags_effect = yes
}
R5_reverse_pathfind_effect = {
	event_target:endpoint = {
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #Eliminates R5
		limit = {
			has_province_flag = pathfinding_R5
			NOT = { has_province_flag = pathfinding_P }
		}
		clr_province_flag = pathfinding_R5
	}
	every_owned_province = { #eliminates R4 not adj to P
		limit = {
			has_province_flag = pathfinding_R4
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R5
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R4
	}
	random_owned_province = { #selects R4 path
		limit = {
			has_province_flag = pathfinding_R4
			any_neighbor_province = {
				has_province_flag = pathfinding_R5
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R3 not adj to P
		limit = {
			has_province_flag = pathfinding_R3
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R4
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R3
	}
	random_owned_province = { #selects R3 path
		limit = {
			has_province_flag = pathfinding_R3
			any_neighbor_province = {
				has_province_flag = pathfinding_R4
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R2 not adj to P
		limit = {
			has_province_flag = pathfinding_R2
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R3
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R2
	}
	random_owned_province = { #selects R2 path
		limit = {
			has_province_flag = pathfinding_R2
			any_neighbor_province = {
				has_province_flag = pathfinding_R3
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R1
		limit = {
			has_province_flag = pathfinding_R1
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R2
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R1
	}
	random_owned_province = { #selects R1 path
		limit = {
			has_province_flag = pathfinding_R1
			any_neighbor_province = {
				has_province_flag = pathfinding_R2
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	clear_remaining_flags_effect = yes
}
R6_reverse_pathfind_effect = {
	event_target:endpoint = {
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #Eliminates R6
		limit = {
			has_province_flag = pathfinding_R6
			NOT = { has_province_flag = pathfinding_P }
		}
		clr_province_flag = pathfinding_R6
	}
	every_owned_province = { #eliminates R5 not adj to P
		limit = {
			has_province_flag = pathfinding_R5
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R6
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R5
	}
	random_owned_province = { #selects R5 path
		limit = {
			has_province_flag = pathfinding_R5
			any_neighbor_province = {
				has_province_flag = pathfinding_R6
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R4 not adj to P
		limit = {
			has_province_flag = pathfinding_R4
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R5
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R4
	}
	random_owned_province = { #selects R4 path
		limit = {
			has_province_flag = pathfinding_R4
			any_neighbor_province = {
				has_province_flag = pathfinding_R5
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R3 not adj to P
		limit = {
			has_province_flag = pathfinding_R3
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R4
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R3
	}
	random_owned_province = { #selects R3 path
		limit = {
			has_province_flag = pathfinding_R3
			any_neighbor_province = {
				has_province_flag = pathfinding_R4
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R2 not adj to P
		limit = {
			has_province_flag = pathfinding_R2
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R3
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R2
	}
	random_owned_province = { #selects R2 path
		limit = {
			has_province_flag = pathfinding_R2
			any_neighbor_province = {
				has_province_flag = pathfinding_R3
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R1
		limit = {
			has_province_flag = pathfinding_R1
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R2
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R1
	}
	random_owned_province = { #selects R1 path
		limit = {
			has_province_flag = pathfinding_R1
			any_neighbor_province = {
				has_province_flag = pathfinding_R2
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	clear_remaining_flags_effect = yes
}
R7_reverse_pathfind_effect = {
	event_target:endpoint = {
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #Eliminates R7
		limit = {
			has_province_flag = pathfinding_R7
			NOT = { has_province_flag = pathfinding_P }
		}
		clr_province_flag = pathfinding_R7
	}
	every_owned_province = { #eliminates R6 not adj to P
		limit = {
			has_province_flag = pathfinding_R6
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R7
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R6
	}
	random_owned_province = { #selects R6 path
		limit = {
			has_province_flag = pathfinding_R6
			any_neighbor_province = {
				has_province_flag = pathfinding_R7
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R5 not adj to P
		limit = {
			has_province_flag = pathfinding_R5
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R6
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R5
	}
	random_owned_province = { #selects R5 path
		limit = {
			has_province_flag = pathfinding_R5
			any_neighbor_province = {
				has_province_flag = pathfinding_R6
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R4 not adj to P
		limit = {
			has_province_flag = pathfinding_R4
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R5
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R4
	}
	random_owned_province = { #selects R4 path
		limit = {
			has_province_flag = pathfinding_R4
			any_neighbor_province = {
				has_province_flag = pathfinding_R5
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R3 not adj to P
		limit = {
			has_province_flag = pathfinding_R3
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R4
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R3
	}
	random_owned_province = { #selects R3 path
		limit = {
			has_province_flag = pathfinding_R3
			any_neighbor_province = {
				has_province_flag = pathfinding_R4
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R2 not adj to P
		limit = {
			has_province_flag = pathfinding_R2
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R3
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R2
	}
	random_owned_province = { #selects R2 path
		limit = {
			has_province_flag = pathfinding_R2
			any_neighbor_province = {
				has_province_flag = pathfinding_R3
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R1
		limit = {
			has_province_flag = pathfinding_R1
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R2
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R1
	}
	random_owned_province = { #selects R1 path
		limit = {
			has_province_flag = pathfinding_R1
			any_neighbor_province = {
				has_province_flag = pathfinding_R2
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	clear_remaining_flags_effect = yes
}


################################
################################
#################################flags used
#expansion_node - for provinces connected to capital
#pathfinding_RX - Pathfinding placeholder for Ring X
#pathfinding_P - Province is good for using as a path
#pathfinding_O - Province is Origin for non capital pathfind

#pathfinder for capital province
pathfinder_effect = {
	#determines starting province
	capital_scope = {
		#starts ring expansion preliminary
		every_neighbor_province = {
			limit = { owned_by = ROOT }
			set_province_flag = pathfinding_R1	
		} #every neighbor of expan. node or capital
	}
	if = {
		limit = {
			any_owned_province = {
				province_has_center_of_trade_of_level = 1
				has_province_flag = pathfinding_R1
				NOT = { has_province_flag =  connected_to_capital }
			}
		}
		random_owned_province = {
			limit = {
				province_has_center_of_trade_of_level = 1
				has_province_flag = pathfinding_R1
				NOT = { has_province_flag =  connected_to_capital }
			}
			save_event_target_as = endpoint
		}
		R1_reverse_pathfind_effect = yes
	}
	else = {
		every_owned_province = {  #every neighbor of R1 that isnt already flagged
			limit = { has_province_flag = pathfinding_R1 }
			every_neighbor_province = {
				limit = {
					NOT = { has_province_flag = pathfinding_R1 }
					NOT = { has_province_flag = expansion_node }
					is_capital = no
					owned_by = ROOT
				}
				set_province_flag = pathfinding_R2
			}
		}
		if = {
			limit = { #if there is a valid CoT to connect to, it will draw a line there
				any_owned_province = {
					province_has_center_of_trade_of_level = 1
					has_province_flag = pathfinding_R2
					NOT = { has_province_flag =  connected_to_capital }
				}
			}
			random_owned_province = { #designates the province it is connecting to as done
				limit = {
					province_has_center_of_trade_of_level = 1
					has_province_flag = pathfinding_R2
					NOT = { has_province_flag =  connected_to_capital }
				}
				save_event_target_as = endpoint
			}
			R2_reverse_pathfind_effect = yes
		}
		else = {
			every_owned_province = {  #every neighbor of R2 that isnt already flagged
				limit = { has_province_flag = pathfinding_R2 }
				every_neighbor_province = {
					limit = {
						NOT = { has_province_flag = pathfinding_R2 }
						NOT = { has_province_flag = pathfinding_R1 }
						NOT = { has_province_flag = expansion_node }
						is_capital = no
						owned_by = ROOT
					}
					set_province_flag = pathfinding_R3
				}
			}
			if = {
				limit = {
					any_owned_province = {
						province_has_center_of_trade_of_level = 1
						has_province_flag = pathfinding_R3
						NOT = { has_province_flag =  connected_to_capital }
					}
				}
				random_owned_province = {
					limit = {
						province_has_center_of_trade_of_level = 1
						has_province_flag = pathfinding_R3
						NOT = { has_province_flag =  connected_to_capital }
					}
					save_event_target_as = endpoint
				}
				R3_reverse_pathfind_effect = yes
			}
			else = {
				every_owned_province = {  #every neighbor of R3 that isnt already flagged
					limit = { has_province_flag = pathfinding_R3 }
					every_neighbor_province = {
						limit = {
							NOT = { has_province_flag = pathfinding_R3 }
							NOT = { has_province_flag = pathfinding_R2 }
							NOT = { has_province_flag = pathfinding_R1 }
							NOT = { has_province_flag = expansion_node }
							is_capital = no
							owned_by = ROOT
						}
						set_province_flag = pathfinding_R4
					}
				}
				if = {
					limit = {
						any_owned_province = {
							province_has_center_of_trade_of_level = 1
							has_province_flag = pathfinding_R4
							NOT = { has_province_flag =  connected_to_capital }
						}
					}
					random_owned_province = {
						limit = {
							province_has_center_of_trade_of_level = 1
							has_province_flag = pathfinding_R4
							NOT = { has_province_flag =  connected_to_capital }
						}
						save_event_target_as = endpoint
					}
					R4_reverse_pathfind_effect = yes
				}
				else = {
					every_owned_province = {  #every neighbor of R4 that isnt already flagged
						limit = { has_province_flag = pathfinding_R4 }
						every_neighbor_province = {
							limit = {
								NOT = { has_province_flag = pathfinding_R4 }
								NOT = { has_province_flag = pathfinding_R3 }
								NOT = { has_province_flag = pathfinding_R2 }
								NOT = { has_province_flag = pathfinding_R1 }
								NOT = { has_province_flag = expansion_node }
								is_capital = no
								owned_by = ROOT
							}
							set_province_flag = pathfinding_R5
						}
					}
					if = {
						limit = {
							any_owned_province = {
								province_has_center_of_trade_of_level = 1
								has_province_flag = pathfinding_R5
								NOT = { has_province_flag =  connected_to_capital }
							}
						}
						random_owned_province = {
							limit = {
								province_has_center_of_trade_of_level = 1
								has_province_flag = pathfinding_R5
								NOT = { has_province_flag =  connected_to_capital }
							}
							save_event_target_as = endpoint
						}
						R5_reverse_pathfind_effect = yes
					}
					else = {
						every_owned_province = {  #every neighbor of R5 that isnt already flagged
							limit = { has_province_flag = pathfinding_R5 }
							every_neighbor_province = {
								limit = {
									NOT = { has_province_flag = pathfinding_R5 }
									NOT = { has_province_flag = pathfinding_R4 }
									NOT = { has_province_flag = pathfinding_R3 }
									NOT = { has_province_flag = pathfinding_R2 }
									NOT = { has_province_flag = pathfinding_R1 }
									NOT = { has_province_flag = expansion_node }
									is_capital = no
									owned_by = ROOT
								}
								set_province_flag = pathfinding_R6
							}
						}
						if = {
							limit = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 1
									has_province_flag = pathfinding_R6
									NOT = { has_province_flag =  connected_to_capital }
								}
							}
							random_owned_province = {
								limit = {
									province_has_center_of_trade_of_level = 1
									has_province_flag = pathfinding_R6
									NOT = { has_province_flag =  connected_to_capital }
								}
								save_event_target_as = endpoint
							}
							R6_reverse_pathfind_effect = yes
						}
						else = {
							every_owned_province = {  #every neighbor of R6 that isnt already flagged
								limit = { has_province_flag = pathfinding_R6 }
								every_neighbor_province = {
									limit = {
										NOT = { has_province_flag = pathfinding_R6 }
										NOT = { has_province_flag = pathfinding_R5 }
										NOT = { has_province_flag = pathfinding_R4 }
										NOT = { has_province_flag = pathfinding_R3 }
										NOT = { has_province_flag = pathfinding_R2 }
										NOT = { has_province_flag = pathfinding_R1 }
										NOT = { has_province_flag = expansion_node }
										is_capital = no
										owned_by = ROOT
									}
									set_province_flag = pathfinding_R7
								}
							}
							if = {
								limit = {
									any_owned_province = {
										province_has_center_of_trade_of_level = 1
										has_province_flag = pathfinding_R7
										NOT = { has_province_flag =  connected_to_capital }
									}
								}
								random_owned_province = {
									limit = {
										province_has_center_of_trade_of_level = 1
										has_province_flag = pathfinding_R7
										NOT = { has_province_flag =  connected_to_capital }
									}
									save_event_target_as = endpoint
								}
								R7_reverse_pathfind_effect = yes
							}
							else = {
								#nothing
							}
						}
					}
				}
			}
		}
	}
	#7 rings should be enough for any distance between any two CoT's/Capitals
}

clear_remaining_flags_effect = {
	every_owned_province = {
		clr_province_flag = pathfinding_R1
		clr_province_flag = pathfinding_R2
		clr_province_flag = pathfinding_R3
		clr_province_flag = pathfinding_R4
		clr_province_flag = pathfinding_R5
		clr_province_flag = pathfinding_R6
		clr_province_flag = pathfinding_R7
	}
}

#does not require while loop because it just finds adj. prov.
R1_reverse_pathfind_effect = {
	event_target:endpoint = {
		set_province_flag = pathfinding_P
	}
	random_owned_province = {
		limit = {
			is_capital = yes
			any_neighbor_province = {
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	clear_remaining_flags_effect = yes
}
R2_reverse_pathfind_effect = {
	event_target:endpoint = {
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #Eliminates R2
		limit = {
			has_province_flag = pathfinding_R2
			NOT = { has_province_flag = pathfinding_P }
		}
		clr_province_flag = pathfinding_R2
	}
	every_owned_province = { #eliminates R1
		limit = {
			has_province_flag = pathfinding_R1
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R2
				}
			}
		}
		clr_province_flag = pathfinding_R1
	}
	random_owned_province = { #selects R1 path
		limit = {
			has_province_flag = pathfinding_R1
			any_neighbor_province = {
				has_province_flag = pathfinding_R2
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	clear_remaining_flags_effect = yes
}

#repeatable cases
R3_reverse_pathfind_effect = {
	event_target:endpoint = {
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #Eliminates extraneous R3
		limit = {
			has_province_flag = pathfinding_R3
			NOT = { has_province_flag = pathfinding_P }
		}
		clr_province_flag = pathfinding_R3
	}
	every_owned_province = { #eliminates R2 not adj to P
		limit = {
			has_province_flag = pathfinding_R2
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R3
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R2
	}
	random_owned_province = { #selects R2 path
		limit = {
			has_province_flag = pathfinding_R2
			any_neighbor_province = {
				has_province_flag = pathfinding_R3
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R1
		limit = {
			has_province_flag = pathfinding_R1
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R2
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R1
	}
	random_owned_province = { #selects R1 path
		limit = {
			has_province_flag = pathfinding_R1
			any_neighbor_province = {
				has_province_flag = pathfinding_R2
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	clear_remaining_flags_effect = yes
}
R4_reverse_pathfind_effect = {
	event_target:endpoint = {
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #Eliminates R4
		limit = {
			has_province_flag = pathfinding_R4
			NOT = { has_province_flag = pathfinding_P }
		}
		clr_province_flag = pathfinding_R4
	}
	every_owned_province = { #eliminates R2 not adj to P
		limit = {
			has_province_flag = pathfinding_R3
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R4
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R3
	}
	random_owned_province = { #selects R3 path
		limit = {
			has_province_flag = pathfinding_R3
			any_neighbor_province = {
				has_province_flag = pathfinding_R4
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R2 not adj to P
		limit = {
			has_province_flag = pathfinding_R2
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R3
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R2
	}
	random_owned_province = { #selects R2 path
		limit = {
			has_province_flag = pathfinding_R2
			any_neighbor_province = {
				has_province_flag = pathfinding_R3
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R1
		limit = {
			has_province_flag = pathfinding_R1
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R2
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R1
	}
	random_owned_province = { #selects R1 path
		limit = {
			has_province_flag = pathfinding_R1
			any_neighbor_province = {
				has_province_flag = pathfinding_R2
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	clear_remaining_flags_effect = yes
}
R5_reverse_pathfind_effect = {
	event_target:endpoint = {
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #Eliminates R5
		limit = {
			has_province_flag = pathfinding_R5
			NOT = { has_province_flag = pathfinding_P }
		}
		clr_province_flag = pathfinding_R5
	}
	every_owned_province = { #eliminates R4 not adj to P
		limit = {
			has_province_flag = pathfinding_R4
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R5
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R4
	}
	random_owned_province = { #selects R4 path
		limit = {
			has_province_flag = pathfinding_R4
			any_neighbor_province = {
				has_province_flag = pathfinding_R5
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R3 not adj to P
		limit = {
			has_province_flag = pathfinding_R3
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R4
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R3
	}
	random_owned_province = { #selects R3 path
		limit = {
			has_province_flag = pathfinding_R3
			any_neighbor_province = {
				has_province_flag = pathfinding_R4
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R2 not adj to P
		limit = {
			has_province_flag = pathfinding_R2
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R3
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R2
	}
	random_owned_province = { #selects R2 path
		limit = {
			has_province_flag = pathfinding_R2
			any_neighbor_province = {
				has_province_flag = pathfinding_R3
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R1
		limit = {
			has_province_flag = pathfinding_R1
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R2
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R1
	}
	random_owned_province = { #selects R1 path
		limit = {
			has_province_flag = pathfinding_R1
			any_neighbor_province = {
				has_province_flag = pathfinding_R2
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	clear_remaining_flags_effect = yes
}
R6_reverse_pathfind_effect = {
	event_target:endpoint = {
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #Eliminates R6
		limit = {
			has_province_flag = pathfinding_R6
			NOT = { has_province_flag = pathfinding_P }
		}
		clr_province_flag = pathfinding_R6
	}
	every_owned_province = { #eliminates R5 not adj to P
		limit = {
			has_province_flag = pathfinding_R5
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R6
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R5
	}
	random_owned_province = { #selects R5 path
		limit = {
			has_province_flag = pathfinding_R5
			any_neighbor_province = {
				has_province_flag = pathfinding_R6
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R4 not adj to P
		limit = {
			has_province_flag = pathfinding_R4
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R5
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R4
	}
	random_owned_province = { #selects R4 path
		limit = {
			has_province_flag = pathfinding_R4
			any_neighbor_province = {
				has_province_flag = pathfinding_R5
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R3 not adj to P
		limit = {
			has_province_flag = pathfinding_R3
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R4
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R3
	}
	random_owned_province = { #selects R3 path
		limit = {
			has_province_flag = pathfinding_R3
			any_neighbor_province = {
				has_province_flag = pathfinding_R4
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R2 not adj to P
		limit = {
			has_province_flag = pathfinding_R2
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R3
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R2
	}
	random_owned_province = { #selects R2 path
		limit = {
			has_province_flag = pathfinding_R2
			any_neighbor_province = {
				has_province_flag = pathfinding_R3
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R1
		limit = {
			has_province_flag = pathfinding_R1
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R2
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R1
	}
	random_owned_province = { #selects R1 path
		limit = {
			has_province_flag = pathfinding_R1
			any_neighbor_province = {
				has_province_flag = pathfinding_R2
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	clear_remaining_flags_effect = yes
}
R7_reverse_pathfind_effect = {
	event_target:endpoint = {
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #Eliminates R7
		limit = {
			has_province_flag = pathfinding_R7
			NOT = { has_province_flag = pathfinding_P }
		}
		clr_province_flag = pathfinding_R7
	}
	every_owned_province = { #eliminates R6 not adj to P
		limit = {
			has_province_flag = pathfinding_R6
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R7
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R6
	}
	random_owned_province = { #selects R6 path
		limit = {
			has_province_flag = pathfinding_R6
			any_neighbor_province = {
				has_province_flag = pathfinding_R7
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R5 not adj to P
		limit = {
			has_province_flag = pathfinding_R5
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R6
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R5
	}
	random_owned_province = { #selects R5 path
		limit = {
			has_province_flag = pathfinding_R5
			any_neighbor_province = {
				has_province_flag = pathfinding_R6
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R4 not adj to P
		limit = {
			has_province_flag = pathfinding_R4
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R5
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R4
	}
	random_owned_province = { #selects R4 path
		limit = {
			has_province_flag = pathfinding_R4
			any_neighbor_province = {
				has_province_flag = pathfinding_R5
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R3 not adj to P
		limit = {
			has_province_flag = pathfinding_R3
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R4
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R3
	}
	random_owned_province = { #selects R3 path
		limit = {
			has_province_flag = pathfinding_R3
			any_neighbor_province = {
				has_province_flag = pathfinding_R4
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R2 not adj to P
		limit = {
			has_province_flag = pathfinding_R2
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R3
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R2
	}
	random_owned_province = { #selects R2 path
		limit = {
			has_province_flag = pathfinding_R2
			any_neighbor_province = {
				has_province_flag = pathfinding_R3
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	every_owned_province = { #eliminates R1
		limit = {
			has_province_flag = pathfinding_R1
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R2
					has_province_flag = pathfinding_P
				}
			}
		}
		clr_province_flag = pathfinding_R1
	}
	random_owned_province = { #selects R1 path
		limit = {
			has_province_flag = pathfinding_R1
			any_neighbor_province = {
				has_province_flag = pathfinding_R2
				has_province_flag = pathfinding_P
			}
		}
		set_province_flag = pathfinding_P
	}
	clear_remaining_flags_effect = yes
}

################################
################################
################################

#pathfinder for non-capital province
pathfinder_effect_2 = {
	#determines starting province
	clear_remaining_flags_effect = yes #in case any remain from capital pathfinding
	random_owned_province = {
		limit = {
			cavalry_in_province = 1
			NOT = { cavalry_in_province = 2 }
			has_province_flag = connected_to_capital
		}
		set_province_flag = expansion_node
		every_neighbor_province = {
			limit = { owned_by = ROOT }
			set_province_flag = pathfinding_R1	
		} #every neighbor of expan. node or capital
	}
	if = {
		limit = {
			any_owned_province = {
				province_has_center_of_trade_of_level = 1
				has_province_flag = pathfinding_R1
				NOT = { has_province_flag = connected_to_capital }
			}
		}
		random_owned_province = {
			limit = {
				province_has_center_of_trade_of_level = 1
				has_province_flag = pathfinding_R1
				NOT = { has_province_flag = connected_to_capital }
			}
			save_event_target_as = endpoint2
		}
		R1_reverse_pathfind_effect2 = yes
	}
	else = {
		every_owned_province = {  #every neighbor of R1 that isnt already flagged
			limit = { has_province_flag = pathfinding_R1 }
			every_neighbor_province = {
				limit = {
					NOT = { has_province_flag = pathfinding_R1 }
					NOT = { has_province_flag = expansion_node }
					owned_by = ROOT
				}
				set_province_flag = pathfinding_R2
			}
		}
		if = {
			limit = { #if there is a valid CoT to connect to, it will draw a line there
				any_owned_province = {
					province_has_center_of_trade_of_level = 1
					has_province_flag = pathfinding_R2
					NOT = { has_province_flag = connected_to_capital }
				}
			}
			random_owned_province = { #designates the province it is connecting to as done
				limit = {
					province_has_center_of_trade_of_level = 1
					has_province_flag = pathfinding_R2
					NOT = { has_province_flag = connected_to_capital }
				}
				save_event_target_as = endpoint2
			}
			R2_reverse_pathfind_effect2 = yes
		}
		else = {
			every_owned_province = {  #every neighbor of R2 that isnt already flagged
				limit = { has_province_flag = pathfinding_R2 }
				every_neighbor_province = {
					limit = {
						NOT = { has_province_flag = pathfinding_R2 }
						NOT = { has_province_flag = pathfinding_R1 }
						NOT = { has_province_flag = expansion_node }
						owned_by = ROOT
					}
					set_province_flag = pathfinding_R3
				}
			}
			if = {
				limit = {
					any_owned_province = {
						province_has_center_of_trade_of_level = 1
						has_province_flag = pathfinding_R3
						NOT = { has_province_flag = connected_to_capital }
					}
				}
				random_owned_province = {
					limit = {
						province_has_center_of_trade_of_level = 1
						has_province_flag = pathfinding_R3
						NOT = { has_province_flag = connected_to_capital }
					}
					save_event_target_as = endpoint2
				}
				R3_reverse_pathfind_effect2 = yes
			}
			else = {
				every_owned_province = {  #every neighbor of R3 that isnt already flagged
					limit = { has_province_flag = pathfinding_R3 }
					every_neighbor_province = {
						limit = {
							NOT = { has_province_flag = pathfinding_R3 }
							NOT = { has_province_flag = pathfinding_R2 }
							NOT = { has_province_flag = pathfinding_R1 }
							NOT = { has_province_flag = expansion_node }
							owned_by = ROOT
						}
						set_province_flag = pathfinding_R4
					}
				}
				if = {
					limit = {
						any_owned_province = {
							province_has_center_of_trade_of_level = 1
							has_province_flag = pathfinding_R4
							NOT = { has_province_flag = connected_to_capital }
						}
					}
					random_owned_province = {
						limit = {
							province_has_center_of_trade_of_level = 1
							has_province_flag = pathfinding_R4
							NOT = { has_province_flag = connected_to_capital }
						}
						save_event_target_as = endpoint2
					}
					R4_reverse_pathfind_effect2 = yes
				}
				else = {
					every_owned_province = {  #every neighbor of R4 that isnt already flagged
						limit = { has_province_flag = pathfinding_R4 }
						every_neighbor_province = {
							limit = {
								NOT = { has_province_flag = pathfinding_R4 }
								NOT = { has_province_flag = pathfinding_R3 }
								NOT = { has_province_flag = pathfinding_R2 }
								NOT = { has_province_flag = pathfinding_R1 }
								NOT = { has_province_flag = expansion_node }
								owned_by = ROOT
							}
							set_province_flag = pathfinding_R5
						}
					}
					if = {
						limit = {
							any_owned_province = {
								province_has_center_of_trade_of_level = 1
								has_province_flag = pathfinding_R5
								NOT = { has_province_flag = connected_to_capital }
							}
						}
						random_owned_province = {
							limit = {
								province_has_center_of_trade_of_level = 1
								has_province_flag = pathfinding_R5
								NOT = { has_province_flag = connected_to_capital }
							}
							save_event_target_as = endpoint2
						}
						R5_reverse_pathfind_effect2 = yes
					}
					else = {
						every_owned_province = {  #every neighbor of R5 that isnt already flagged
							limit = { has_province_flag = pathfinding_R5 }
							every_neighbor_province = {
								limit = {
									NOT = { has_province_flag = pathfinding_R5 }
									NOT = { has_province_flag = pathfinding_R4 }
									NOT = { has_province_flag = pathfinding_R3 }
									NOT = { has_province_flag = pathfinding_R2 }
									NOT = { has_province_flag = pathfinding_R1 }
									NOT = { has_province_flag = expansion_node }
									owned_by = ROOT
								}
								set_province_flag = pathfinding_R6
							}
						}
						if = {
							limit = {
								any_owned_province = {
									province_has_center_of_trade_of_level = 1
									has_province_flag = pathfinding_R6
									NOT = { has_province_flag = connected_to_capital }
								}
							}
							random_owned_province = {
								limit = {
									province_has_center_of_trade_of_level = 1
									has_province_flag = pathfinding_R6
									NOT = { has_province_flag = connected_to_capital }
								}
								save_event_target_as = endpoint2
							}
							R6_reverse_pathfind_effect2 = yes
						}
						else = {
							every_owned_province = {  #every neighbor of R6 that isnt already flagged
								limit = { has_province_flag = pathfinding_R6 }
								every_neighbor_province = {
									limit = {
										NOT = { has_province_flag = pathfinding_R6 }
										NOT = { has_province_flag = pathfinding_R5 }
										NOT = { has_province_flag = pathfinding_R4 }
										NOT = { has_province_flag = pathfinding_R3 }
										NOT = { has_province_flag = pathfinding_R2 }
										NOT = { has_province_flag = pathfinding_R1 }
										NOT = { has_province_flag = expansion_node }
										owned_by = ROOT
									}
									set_province_flag = pathfinding_R7
								}
							}
							if = {
								limit = {
									any_owned_province = {
										province_has_center_of_trade_of_level = 1
										has_province_flag = pathfinding_R7
										NOT = { has_province_flag = connected_to_capital }
									}
								}
								random_owned_province = {
									limit = {
										province_has_center_of_trade_of_level = 1
										has_province_flag = pathfinding_R7
										NOT = { has_province_flag = connected_to_capital }
									}
									save_event_target_as = endpoint2
								}
								R7_reverse_pathfind_effect2 = yes
							}
							else = {
								#nothing
							}
						}
					}
				}
			}
		}
	}
	#7 rings should be enough for any distance between any two CoT's/Capitals
}

#does not require while loop because it just finds adj. prov.
R1_reverse_pathfind_effect2 = {
	event_target:endpoint2 = {
		set_province_flag = pathfinding_P2
	}
	random_owned_province = {
		limit = {
			has_province_flag = expansion_node
			any_neighbor_province = {
				has_province_flag = pathfinding_P2
			}
		}
		set_province_flag = pathfinding_P2
	}
	clear_remaining_flags_effect = yes
}
R2_reverse_pathfind_effect2 = {
	event_target:endpoint2 = {
		set_province_flag = pathfinding_P2
	}
	every_owned_province = { #Eliminates R2
		limit = {
			has_province_flag = pathfinding_R2
			NOT = { has_province_flag = pathfinding_P2 }
		}
		clr_province_flag = pathfinding_R2
	}
	every_owned_province = { #eliminates R1
		limit = {
			has_province_flag = pathfinding_R1
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R2
				}
			}
		}
		clr_province_flag = pathfinding_R1
	}
	random_owned_province = { #selects R1 path
		limit = {
			has_province_flag = pathfinding_R1
			any_neighbor_province = {
				has_province_flag = pathfinding_R2
				has_province_flag = pathfinding_P2
			}
		}
		set_province_flag = pathfinding_P2
	}
	clear_remaining_flags_effect = yes
}

#repeatable cases
R3_reverse_pathfind_effect2 = {
	event_target:endpoint2 = {
		set_province_flag = pathfinding_P2
	}
	every_owned_province = { #Eliminates extraneous R3
		limit = {
			has_province_flag = pathfinding_R3
			NOT = { has_province_flag = pathfinding_P2 }
		}
		clr_province_flag = pathfinding_R3
	}
	every_owned_province = { #eliminates R2 not adj to P
		limit = {
			has_province_flag = pathfinding_R2
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R3
					has_province_flag = pathfinding_P2
				}
			}
		}
		clr_province_flag = pathfinding_R2
	}
	random_owned_province = { #selects R2 path
		limit = {
			has_province_flag = pathfinding_R2
			any_neighbor_province = {
				has_province_flag = pathfinding_R3
				has_province_flag = pathfinding_P2
			}
		}
		set_province_flag = pathfinding_P2
	}
	every_owned_province = { #eliminates R1
		limit = {
			has_province_flag = pathfinding_R1
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R2
					has_province_flag = pathfinding_P2
				}
			}
		}
		clr_province_flag = pathfinding_R1
	}
	random_owned_province = { #selects R1 path
		limit = {
			has_province_flag = pathfinding_R1
			any_neighbor_province = {
				has_province_flag = pathfinding_R2
				has_province_flag = pathfinding_P2
			}
		}
		set_province_flag = pathfinding_P2
	}
	clear_remaining_flags_effect = yes
}
R4_reverse_pathfind_effect2 = {
	event_target:endpoint2 = {
		set_province_flag = pathfinding_P2
	}
	every_owned_province = { #Eliminates R4
		limit = {
			has_province_flag = pathfinding_R4
			NOT = { has_province_flag = pathfinding_P2 }
		}
		clr_province_flag = pathfinding_R4
	}
	every_owned_province = { #eliminates R2 not adj to P
		limit = {
			has_province_flag = pathfinding_R3
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R4
					has_province_flag = pathfinding_P2
				}
			}
		}
		clr_province_flag = pathfinding_R3
	}
	random_owned_province = { #selects R3 path
		limit = {
			has_province_flag = pathfinding_R3
			any_neighbor_province = {
				has_province_flag = pathfinding_R4
				has_province_flag = pathfinding_P2
			}
		}
		set_province_flag = pathfinding_P2
	}
	every_owned_province = { #eliminates R2 not adj to P
		limit = {
			has_province_flag = pathfinding_R2
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R3
					has_province_flag = pathfinding_P2
				}
			}
		}
		clr_province_flag = pathfinding_R2
	}
	random_owned_province = { #selects R2 path
		limit = {
			has_province_flag = pathfinding_R2
			any_neighbor_province = {
				has_province_flag = pathfinding_R3
				has_province_flag = pathfinding_P2
			}
		}
		set_province_flag = pathfinding_P2
	}
	every_owned_province = { #eliminates R1
		limit = {
			has_province_flag = pathfinding_R1
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R2
					has_province_flag = pathfinding_P2
				}
			}
		}
		clr_province_flag = pathfinding_R1
	}
	random_owned_province = { #selects R1 path
		limit = {
			has_province_flag = pathfinding_R1
			any_neighbor_province = {
				has_province_flag = pathfinding_R2
				has_province_flag = pathfinding_P2
			}
		}
		set_province_flag = pathfinding_P2
	}
	clear_remaining_flags_effect = yes
}
R5_reverse_pathfind_effect2 = {
	event_target:endpoint2 = {
		set_province_flag = pathfinding_P2
	}
	every_owned_province = { #Eliminates R5
		limit = {
			has_province_flag = pathfinding_R5
			NOT = { has_province_flag = pathfinding_P2 }
		}
		clr_province_flag = pathfinding_R5
	}
	every_owned_province = { #eliminates R4 not adj to P
		limit = {
			has_province_flag = pathfinding_R4
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R5
					has_province_flag = pathfinding_P2
				}
			}
		}
		clr_province_flag = pathfinding_R4
	}
	random_owned_province = { #selects R4 path
		limit = {
			has_province_flag = pathfinding_R4
			any_neighbor_province = {
				has_province_flag = pathfinding_R5
				has_province_flag = pathfinding_P2
			}
		}
		set_province_flag = pathfinding_P2
	}
	every_owned_province = { #eliminates R3 not adj to P
		limit = {
			has_province_flag = pathfinding_R3
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R4
					has_province_flag = pathfinding_P2
				}
			}
		}
		clr_province_flag = pathfinding_R3
	}
	random_owned_province = { #selects R3 path
		limit = {
			has_province_flag = pathfinding_R3
			any_neighbor_province = {
				has_province_flag = pathfinding_R4
				has_province_flag = pathfinding_P2
			}
		}
		set_province_flag = pathfinding_P2
	}
	every_owned_province = { #eliminates R2 not adj to P
		limit = {
			has_province_flag = pathfinding_R2
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R3
					has_province_flag = pathfinding_P2
				}
			}
		}
		clr_province_flag = pathfinding_R2
	}
	random_owned_province = { #selects R2 path
		limit = {
			has_province_flag = pathfinding_R2
			any_neighbor_province = {
				has_province_flag = pathfinding_R3
				has_province_flag = pathfinding_P2
			}
		}
		set_province_flag = pathfinding_P2
	}
	every_owned_province = { #eliminates R1
		limit = {
			has_province_flag = pathfinding_R1
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R2
					has_province_flag = pathfinding_P2
				}
			}
		}
		clr_province_flag = pathfinding_R1
	}
	random_owned_province = { #selects R1 path
		limit = {
			has_province_flag = pathfinding_R1
			any_neighbor_province = {
				has_province_flag = pathfinding_R2
				has_province_flag = pathfinding_P2
			}
		}
		set_province_flag = pathfinding_P2
	}
	clear_remaining_flags_effect = yes
}
R6_reverse_pathfind_effect2 = {
	event_target:endpoint2 = {
		set_province_flag = pathfinding_P2
	}
	every_owned_province = { #Eliminates R6
		limit = {
			has_province_flag = pathfinding_R6
			NOT = { has_province_flag = pathfinding_P2 }
		}
		clr_province_flag = pathfinding_R6
	}
	every_owned_province = { #eliminates R5 not adj to P
		limit = {
			has_province_flag = pathfinding_R5
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R6
					has_province_flag = pathfinding_P2
				}
			}
		}
		clr_province_flag = pathfinding_R5
	}
	random_owned_province = { #selects R5 path
		limit = {
			has_province_flag = pathfinding_R5
			any_neighbor_province = {
				has_province_flag = pathfinding_R6
				has_province_flag = pathfinding_P2
			}
		}
		set_province_flag = pathfinding_P2
	}
	every_owned_province = { #eliminates R4 not adj to P
		limit = {
			has_province_flag = pathfinding_R4
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R5
					has_province_flag = pathfinding_P2
				}
			}
		}
		clr_province_flag = pathfinding_R4
	}
	random_owned_province = { #selects R4 path
		limit = {
			has_province_flag = pathfinding_R4
			any_neighbor_province = {
				has_province_flag = pathfinding_R5
				has_province_flag = pathfinding_P2
			}
		}
		set_province_flag = pathfinding_P2
	}
	every_owned_province = { #eliminates R3 not adj to P
		limit = {
			has_province_flag = pathfinding_R3
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R4
					has_province_flag = pathfinding_P2
				}
			}
		}
		clr_province_flag = pathfinding_R3
	}
	random_owned_province = { #selects R3 path
		limit = {
			has_province_flag = pathfinding_R3
			any_neighbor_province = {
				has_province_flag = pathfinding_R4
				has_province_flag = pathfinding_P2
			}
		}
		set_province_flag = pathfinding_P2
	}
	every_owned_province = { #eliminates R2 not adj to P
		limit = {
			has_province_flag = pathfinding_R2
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R3
					has_province_flag = pathfinding_P2
				}
			}
		}
		clr_province_flag = pathfinding_R2
	}
	random_owned_province = { #selects R2 path
		limit = {
			has_province_flag = pathfinding_R2
			any_neighbor_province = {
				has_province_flag = pathfinding_R3
				has_province_flag = pathfinding_P2
			}
		}
		set_province_flag = pathfinding_P2
	}
	every_owned_province = { #eliminates R1
		limit = {
			has_province_flag = pathfinding_R1
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R2
					has_province_flag = pathfinding_P2
				}
			}
		}
		clr_province_flag = pathfinding_R1
	}
	random_owned_province = { #selects R1 path
		limit = {
			has_province_flag = pathfinding_R1
			any_neighbor_province = {
				has_province_flag = pathfinding_R2
				has_province_flag = pathfinding_P2
			}
		}
		set_province_flag = pathfinding_P2
	}
	clear_remaining_flags_effect = yes
}
R7_reverse_pathfind_effect2 = {
	event_target:endpoint2 = {
		set_province_flag = pathfinding_P2
	}
	every_owned_province = { #Eliminates R7
		limit = {
			has_province_flag = pathfinding_R7
			NOT = { has_province_flag = pathfinding_P2 }
		}
		clr_province_flag = pathfinding_R7
	}
	every_owned_province = { #eliminates R6 not adj to P
		limit = {
			has_province_flag = pathfinding_R6
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R7
					has_province_flag = pathfinding_P2
				}
			}
		}
		clr_province_flag = pathfinding_R6
	}
	random_owned_province = { #selects R6 path
		limit = {
			has_province_flag = pathfinding_R6
			any_neighbor_province = {
				has_province_flag = pathfinding_R7
				has_province_flag = pathfinding_P2
			}
		}
		set_province_flag = pathfinding_P2
	}
	every_owned_province = { #eliminates R5 not adj to P
		limit = {
			has_province_flag = pathfinding_R5
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R6
					has_province_flag = pathfinding_P2
				}
			}
		}
		clr_province_flag = pathfinding_R5
	}
	random_owned_province = { #selects R5 path
		limit = {
			has_province_flag = pathfinding_R5
			any_neighbor_province = {
				has_province_flag = pathfinding_R6
				has_province_flag = pathfinding_P2
			}
		}
		set_province_flag = pathfinding_P2
	}
	every_owned_province = { #eliminates R4 not adj to P
		limit = {
			has_province_flag = pathfinding_R4
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R5
					has_province_flag = pathfinding_P2
				}
			}
		}
		clr_province_flag = pathfinding_R4
	}
	random_owned_province = { #selects R4 path
		limit = {
			has_province_flag = pathfinding_R4
			any_neighbor_province = {
				has_province_flag = pathfinding_R5
				has_province_flag = pathfinding_P2
			}
		}
		set_province_flag = pathfinding_P2
	}
	every_owned_province = { #eliminates R3 not adj to P
		limit = {
			has_province_flag = pathfinding_R3
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R4
					has_province_flag = pathfinding_P2
				}
			}
		}
		clr_province_flag = pathfinding_R3
	}
	random_owned_province = { #selects R3 path
		limit = {
			has_province_flag = pathfinding_R3
			any_neighbor_province = {
				has_province_flag = pathfinding_R4
				has_province_flag = pathfinding_P2
			}
		}
		set_province_flag = pathfinding_P2
	}
	every_owned_province = { #eliminates R2 not adj to P
		limit = {
			has_province_flag = pathfinding_R2
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R3
					has_province_flag = pathfinding_P2
				}
			}
		}
		clr_province_flag = pathfinding_R2
	}
	random_owned_province = { #selects R2 path
		limit = {
			has_province_flag = pathfinding_R2
			any_neighbor_province = {
				has_province_flag = pathfinding_R3
				has_province_flag = pathfinding_P2
			}
		}
		set_province_flag = pathfinding_P2
	}
	every_owned_province = { #eliminates R1
		limit = {
			has_province_flag = pathfinding_R1
			NOT = {
				any_neighbor_province = {
					has_province_flag = pathfinding_R2
					has_province_flag = pathfinding_P2
				}
			}
		}
		clr_province_flag = pathfinding_R1
	}
	random_owned_province = { #selects R1 path
		limit = {
			has_province_flag = pathfinding_R1
			any_neighbor_province = {
				has_province_flag = pathfinding_R2
				has_province_flag = pathfinding_P2
			}
		}
		set_province_flag = pathfinding_P2
	}
	clear_remaining_flags_effect = yes
}

